{% from "layouts/_macros.html" import render_block %}
{% from "tags/_macros.html" import tag_list %}

{% macro illusts_display(illust_search_url, illust_count, section_id, section=True, artist=None) -%}
    {% call render_block('section' if section else 'div', id=section_id) %}
        <span class="heading">Illusts</span> (&thinsp;{{ illust_count }}&thinsp;)
        {% if artist is not none %}
            [&thinsp;<span class="illust-add">{{ helpers.artist.add_illust_link(artist) }}</span>&thinsp;]
        {% endif %}
        <span class="illust-search">{{ helpers.base.general_link('Â»', illust_search_url) }}</span>
    {% endcall %}
{%- endmacro %}

{% macro illusts_section(illusts, section_id) -%}
    {% if illusts is not none %}
        {% if illusts is not iterable %}
            {% set illusts = [illusts] %}
            {% set singular = True %}
        {% else %}
            {% set singular = False %}
        {% endif %}
        {% if illusts | length > 0 %}
            <section id="{{ section_id }}">
                <h4>{{ "Illust" if singular else "Illusts" }}</h4>
                <ul>
                    {% for illust in illusts %}
                        <li>
                            <span class="item-heading">{{ illust.show_link }}</span>
                            <ul>
                                {% if illust.site_name != 'custom' %}
                                    <li>
                                        <strong>{{ helpers.illust.site_illust_link(illust) }} {{ helpers.illust.alt_site_illust_link(illust) }}</strong>
                                    </li>
                                    <li>
                                        <strong>Site ID:</strong> {{ illust.site_illust_id }}
                                    </li>
                                    <li>
                                        <strong>Domain:</strong> {{ illust.site_domain }}
                                    </li>
                                {% else %}
                                    <li>
                                        <strong>Domain:</strong> {{ illust.site_name }}
                                    </li>
                                    <li>
                                        <strong>{{ helpers.base.url_link(illust.site_url, max_len=40) }}</strong>
                                    </li>
                                {% endif %}
                                <li>
                                    <strong>Tags:</strong> {{ tag_list(illust.tags, item_type='illust', item_id=illust.id) }}
                                </li>
                            </ul>
                        </li>
                    {% endfor %}
                </ul>
            </section>
        {% endif %}
    {% endif %}
{%- endmacro %}
